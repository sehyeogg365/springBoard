<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@include file="/WEB-INF/views/common/common.jsp"%>    
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>login</title>
</head>
<script type="text/javascript">
	
	$j(document).ready(function(){
		
		
		$j("#applyBtn").on("click", function(event){
			
			event.preventDefault();
			
			var $frm = $j('.loginForm :input');
			var param = $frm.serialize();
			
			alert("param"+param);
			
			let name = $j("#nameInput").val();
			let phone = $j("#phoneInput").val();
			
			if(name == ""){
				alert("아이디를 입력하세요.");
				return ;
			}
			
			if(phone == ""){
				alert("비밀번호를 입력하세요.");
				return ;
			}
			
			$j.ajax({
				url : "/recruit/loginAction.do",
			    dataType: "json",
			    type: "POST",
			    data : param,
			    success: function(data, textStatus, jqXHR)
			    {
					
			    	if(data.success=="Y"){
			    		alert("로그인완료");
						
						alert("메세지:"+data.success);
						
						location.href = "/recruit/mainPage.do";
			    		
			    	} else {
			    		
			    		alert("로그인 실패");
			    	}
			    	
					//여기 수정해보기 상수가 아닌 pageNo response로 받아와야 하나? 
					
			    },
			    error: function (jqXHR, textStatus, errorThrown)
			    {
			    	alert("실패");
			    }
				
				
			});

		});
	
	});
	
	
</script>
<body>
	<form class="logingForm">
		<table align="center">
			
			<tr>
				<td>
					<table border ="1"> 
						<tr>
							<td width="120" align="center">
							이름
							</td>
							<td width="200">
								<input id="nameInput" name="name" type="text" size="20" value=""> 
								
							</td>
						</tr>
						<tr>
							<td width="120" align="center">
								휴대폰번호
							</td>
							<td width="200">
								<input id="phoneInput" name="phone" type="text" size="20" value=""> 
							</td>
						</tr>	
					
					</table>
				</td>	
			</tr>
			<tr>
			<td align="right">
				<button id="applyBtn">입사지원</button>
			</td>
		</tr>		
		</table>
	
	</form>

</body>
</html>